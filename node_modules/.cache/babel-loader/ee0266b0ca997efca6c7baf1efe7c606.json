{"remainingRequest":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\UJmarketplace\\src\\components\\auth\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\src\\components\\auth\\login.vue","mtime":1589903067376},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"C:\\\\Users\\\\User\\\\Desktop\\\\UJmarketplace\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import modules\nimport { mapActions } from 'vuex';\nimport jsCookie from 'js-cookie';\nexport default {\n  name: \"login\",\n  data: function data() {\n    return {\n      sNo: '',\n      pwd: '',\n      sNoReset: ''\n    };\n  },\n  methods: _objectSpread({}, mapActions(['authenticate']), {\n    // login method\n    login: function login() {\n      var _this = this;\n\n      this.$axios.post('/user/login', {\n        studentNo: this.sNo,\n        password: this.pwd\n      }).then(function (res) {\n        // if error \n        if (res.data.error) {\n          _this.$toasted.error(res.data.message, {\n            icon: \"times-circle\"\n          });\n        } else {\n          // cookie setting\n          jsCookie.set('4u7h3n71c4710n', {\n            token: res.data.token,\n            authData: res.data.authData\n          }, {\n            expires: 9000\n          }); // auth \n\n          _this.authenticate(res.data.authData);\n\n          _this.$toasted.success(\"Logged In\", {\n            icon: \"check-circle\"\n          }); // redirection\n\n\n          _this.$router.push('/');\n        }\n      }).catch(function (err) {\n        // toast\n        // console.log(err)\n        _this.$toasted.error(err, {\n          icon: \"times-circle\"\n        });\n      });\n    },\n    resetLink: function resetLink() {\n      var _this2 = this;\n\n      if (this.sNoReset.length > 0) {\n        var loader = this.$loading.show();\n        this.$axios.post(\"/user/resetlink\", {\n          sNo: this.sNoReset\n        }).then(function (res) {\n          loader.hide();\n\n          if (res.data.error) {\n            _this2.$toasted.error(res.data.message, {\n              icon: \"times-circle\"\n            });\n          } else {\n            _this2.$toasted.success(res.data.message, {\n              icon: \"check\"\n            });\n          }\n        }).catch(function (err) {\n          loader.hide();\n\n          _this2.$toasted.error(err, {\n            icon: \"times-circle\"\n          });\n        });\n      } else {\n        this.$toasted.error(\"Enter Student number / number on your UJ access card\", {\n          icon: \"times-circle\"\n        });\n      }\n    }\n  })\n};",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,QAAA,MAAA,WAAA;AAEA,eAAA;AAEA,EAAA,IAAA,EAAA,OAFA;AAGA,EAAA,IAHA,kBAGA;AAEA,WAAA;AACA,MAAA,GAAA,EAAA,EADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAMA,GAXA;AAcA,EAAA,OAAA,oBAEA,UAAA,CAAA,CAAA,cAAA,CAAA,CAFA;AAIA;AACA,IAAA,KALA,mBAKA;AAAA;;AAEA,WAAA,MAAA,CAAA,IAAA,CAAA,aAAA,EAAA;AAAA,QAAA,SAAA,EAAA,KAAA,GAAA;AAAA,QAAA,QAAA,EAAA,KAAA;AAAA,OAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AAEA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,SAFA,MAEA;AAEA;AACA,UAAA,QAAA,CAAA,GAAA,CAAA,gBAAA,EAAA;AAAA,YAAA,KAAA,EAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AAAA,YAAA,QAAA,EAAA,GAAA,CAAA,IAAA,CAAA;AAAA,WAAA,EAAA;AAAA,YAAA,OAAA,EAAA;AAAA,WAAA,EAHA,CAKA;;AACA,UAAA,KAAA,CAAA,YAAA,CAAA,GAAA,CAAA,IAAA,CAAA,QAAA;;AAEA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,WAAA,EAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA,EARA,CAUA;;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AAGA;AAGA,OAvBA,EAuBA,KAvBA,CAuBA,UAAA,GAAA,EAAA;AACA;AACA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OA3BA;AA+BA,KAtCA;AAwCA,IAAA,SAxCA,uBAwCA;AAAA;;AAEA,UAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AAEA,YAAA,MAAA,GAAA,KAAA,QAAA,CAAA,IAAA,EAAA;AAEA,aAAA,MAAA,CAAA,IAAA,CAAA,iBAAA,EAAA;AAAA,UAAA,GAAA,EAAA,KAAA;AAAA,SAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AAEA,UAAA,MAAA,CAAA,IAAA;;AAEA,cAAA,GAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAAA;AACA,WAFA,MAEA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAAA;AACA;AAEA,SAXA,EAWA,KAXA,CAWA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,EAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,SAdA;AAeA,OAnBA,MAmBA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,sDAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA;AAEA;AAjEA;AAdA,CAAA","sourcesContent":["<template>\n  \n  <div>\n\n  <div class=\"container purple p-2 mt-2 mb-4\">\n\n    <h5 class=\"white-text\">\n      <i class=\"fa fa-user d-inline\"></i> Login\n    </h5>\n\n    <!-- STUDENT NO -->\n    <div class=\"form-group\">\n      <label for=\"sNo\" class=\"white-text\"><i class=\"fa fa-graduation-cap\" aria-hidden=\"true\"></i> Student No.</label>\n      <input v-model=\"sNo\" type=\"text\" id=\"sNo\" class=\"form-control\" placeholder=\"e.g 212002355\" aria-describedby=\"helpName\">\n    </div>\n\n\n    <div class=\"form-group\">\n      <label for=\"pwd\" class=\"white-text\"><i class=\"fa fa-lock\" aria-hidden=\"true\"></i> Password</label>\n      <input v-model=\"pwd\" type=\"password\" id=\"pwd\" class=\"form-control\">\n    </div>\n\n    <button class=\"btn orange btn-lg\" @click=\"login\">Login</button>\n\n    <div class=\"alert mt-2 border-primary\" role=\"alert\">\n      <router-link to=\"/register\"><a href=\"#\" class=\"btn blue btn-sm text-white\">Register</a></router-link> | <a class=\"modal-trigger white-text\" href=\"#pwdReset\">Forgot password?</a>\n    </div>\n\n  </div>\n\n\n  <!-- MODAL -->\n  <div class=\"modal orange darken-4\" id=\"pwdReset\">\n \n      <div class=\"modal-content\">\n        <!-- STUDENT NO -->\n        <div class=\"form-group\">\n          <label for=\"sNoMod\" class=\"white-text\"><i class=\"fa fa-graduation-cap\" aria-hidden=\"true\"></i> Student No.</label>\n          <input v-model=\"sNoReset\" type=\"text\" id=\"sNoMod\" class=\"form-control\" placeholder=\"e.g 212002355\" aria-describedby=\"helpName\">\n\n          <div class=\"text-dark font-italic text-muted\">\n            <p>You will receive an email with a link, and the link will expire in 10 minutes</p>\n          </div>\n\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn modal-close orange darken-4\" data-dismiss=\"modal\" @click=\"resetLink\">Submit</button>\n        <button type=\"button\" class=\"btn modal-close white black-text\" data-dismiss=\"modal\">Cancel</button>\n      </div>\n    </div>\n  </div>\n\n\n</template>\n\n<script>\n\n// import modules\nimport {mapActions} from 'vuex'\nimport jsCookie from 'js-cookie'\n\nexport default {\n\n  name: \"login\",\n  data(){\n\n    return {\n      sNo: '',\n      pwd: '',\n      sNoReset: ''\n    }\n\n  },\n\n\n  methods: {\n\n    ...mapActions(['authenticate']),\n\n    // login method\n    login(){\n\n      this.$axios.post('/user/login', {studentNo: this.sNo, password: this.pwd})\n        .then(res => {\n\n          // if error \n          if(res.data.error) {\n            this.$toasted.error(res.data.message,{icon: \"times-circle\"})\n          }  else {\n\n            // cookie setting\n            jsCookie.set('4u7h3n71c4710n', {token: res.data.token, authData: res.data.authData}, {expires: 9000})\n\n            // auth \n            this.authenticate(res.data.authData)\n\n            this.$toasted.success(\"Logged In\", {icon: \"check-circle\"})\n\n            // redirection\n            this.$router.push('/')\n\n\n          }\n          \n\n        }).catch(err => {\n          // toast\n          // console.log(err)\n          this.$toasted.error(err,{icon: \"times-circle\"})\n        })\n\n        \n\n    },\n\n    resetLink() {\n\n      if(this.sNoReset.length > 0) {\n\n        let loader = this.$loading.show()\n\n        this.$axios.post(\"/user/resetlink\", {sNo: this.sNoReset})\n        .then(res => {\n\n          loader.hide()\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon:\"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon:\"check\"})\n          }\n\n        }).catch(err => {\n          loader.hide()          \n          this.$toasted.error(err, {icon:\"times-circle\"})\n        })\n      } else {\n        this.$toasted.error(\"Enter Student number / number on your UJ access card\", {icon:\"times-circle\"})\n      }\n\n    }\n\n  }\n\n}\n</script>\n\n<style scoped>\n  .form {\n    margin-bottom: 60px;\n  }\n</style>\n"],"sourceRoot":"src/components/auth"}]}