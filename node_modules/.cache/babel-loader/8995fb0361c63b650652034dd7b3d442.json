{"remainingRequest":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\UJmarketplace\\src\\components\\auth\\profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\src\\components\\auth\\profile.vue","mtime":1586506813567},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\User\\\\Desktop\\\\UJmarketplace\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _objectSpread from \"C:\\\\Users\\\\User\\\\Desktop\\\\UJmarketplace\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions } from 'vuex'; // exportation\n\nexport default {\n  name: \"profile\",\n  data: function data() {\n    return {\n      user: {\n        name: null,\n        campus: null,\n        pos: null,\n        cellNo: null,\n        whatsAppNo: null,\n        email: null,\n        studentNo: null,\n        _id: null\n      },\n      oldPwd: \"\",\n      userUpdate: {\n        name: \"null\",\n        campus: null,\n        pos: null,\n        cellNo: null,\n        whatsAppNo: null,\n        email: null,\n        studentNo: null\n      },\n      newPwd: \"\",\n      posOther: \"\"\n    };\n  },\n  methods: _objectSpread({}, mapActions(['getCampuses', \"DeAuth\"]), {\n    getUser: function getUser() {\n      var _this = this;\n\n      this.$axios.get('/user/profile', this.$headers()).then(function (res) {\n        _this.user = res.data.profile;\n      }).catch(function (err) {\n        _this.$toasted.error(err, {\n          icon: \"times-circle\"\n        });\n      });\n    },\n    changePwd: function changePwd() {\n      var _this2 = this;\n\n      if (this.newPwd.length < 4 || this.oldPwd.length < 4) {\n        this.$toasted.error(\"password must atleast be 4 charecters long\", {\n          icon: \"times-circle\"\n        });\n      } else {\n        var loader = this.$loading.show();\n        this.$axios.post('/user/passwordchange', {\n          oldPwd: this.oldPwd,\n          newPwd: this.newPwd\n        }, this.$headers()).then(function (res) {\n          if (res.data.error) {\n            _this2.$toasted.error(res.data.message, {\n              icon: \"times-circle\"\n            });\n          } else {\n            _this2.$toasted.success(res.data.message, {\n              icon: \"check\"\n            });\n\n            _this2.oldPwd = \"\";\n            _this2.newPwd = \"\";\n          }\n\n          loader.hide();\n        }).catch(function (err) {\n          _this2.$toasted.error(err, {\n            icon: \"times-circle\"\n          });\n\n          loader.hide();\n        });\n      }\n    },\n    setUpdateVals: function setUpdateVals(values) {\n      this.userUpdate = values;\n    },\n    updateProfile: function updateProfile() {\n      var _this3 = this;\n\n      var loader = this.$loading.show();\n      this.$axios.post('/user/profileupdate', {\n        values: this.userUpdate,\n        update: \"profile\"\n      }, this.$headers()).then(function (res) {\n        if (res.data.error) {\n          _this3.$toasted.error(res.data.message, {\n            icon: \"times-circle\"\n          });\n        } else {\n          _this3.$toasted.success(res.data.message, {\n            icon: \"check\"\n          });\n\n          _this3.getUser();\n        }\n\n        loader.hide();\n      }).catch(function (err) {\n        _this3.$toasted.error(err, {\n          icon: \"times-circle\"\n        });\n\n        loader.hide();\n      });\n    },\n    updatePos: function updatePos() {\n      var _this4 = this;\n\n      // carefully set postion\n      var position = this.userUpdate.pos;\n      var positionOther = this.posOther;\n\n      function getPos() {\n        if (position == 'other') {\n          return positionOther;\n        } else {\n          return position;\n        }\n      }\n\n      var loader = this.$loading.show();\n      this.$axios.post('/user/profileupdate', {\n        values: {\n          pos: getPos()\n        },\n        update: \"position\"\n      }, this.$headers()).then(function (res) {\n        if (res.data.error) {\n          _this4.$toasted.error(res.data.message, {\n            icon: \"times-circle\"\n          });\n        } else {\n          _this4.$toasted.success(res.data.message, {\n            icon: \"check\"\n          });\n\n          _this4.getUser();\n        }\n\n        loader.hide();\n      }).catch(function (err) {\n        _this4.$toasted.error(err, {\n          icon: \"times-circle\"\n        });\n\n        loader.hide();\n      });\n    },\n    removeSelf: function removeSelf() {\n      var _this5 = this;\n\n      var loader = this.$loading.show();\n      this.$axios.delete('/user/rem/' + this.user._id, this.$headers()).then(function (res) {\n        if (res.data.error) {\n          _this5.$toasted.error(res.data.message, {\n            icon: \"times-circle\"\n          });\n        } else {\n          _this5.$toasted.success(res.data.message, {\n            icon: \"check\"\n          });\n\n          _this5.DeAuth();\n\n          _this5.$router.replace(\"/\");\n        }\n\n        loader.hide();\n      }).catch(function (err) {\n        loader.hide();\n\n        _this5.$toasted.error(err, {\n          icon: \"times-circle\"\n        });\n      });\n    }\n  }),\n  // end of methods\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      var loader;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              loader = this.$loading.show();\n              _context.next = 3;\n              return this.getUser();\n\n            case 3:\n              _context.next = 5;\n              return this.getCampuses();\n\n            case 5:\n              loader.hide();\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  beforeMount: function () {\n    var _beforeMount = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee2() {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.getCampuses();\n\n            case 2:\n              _context2.next = 4;\n              return this.getUser();\n\n            case 4:\n              return _context2.abrupt(\"return\", false);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function beforeMount() {\n      return _beforeMount.apply(this, arguments);\n    }\n\n    return beforeMount;\n  }(),\n  computed: mapGetters(['campuses', 'authInfo'])\n};",{"version":3,"sources":["profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  \n<div>\n\n  <div class=\"container p-2 mt-2 purple mb-4\">\n\n    <h5 class=\"white-text\">\n      <i class=\"fa fa-user  d-inline\"></i> Profile\n    </h5>\n    <div class=\"clearfix\"></div>\n\n    <ul class=\"collapsible\">\n\n      <!-- PERSONAL DETAILS -->\n      <li>\n\n          <div class=\"collapsible-header\">\n            <p>\n              Personal Details\n            </p>\n          </div>\n          <div class=\"collapsible-body\">\n              <table class=\"table table-responsive\">\n                <tbody>\n                  <tr>\n                    <td>Name</td>\n                    <td class=\"font-weight-light text-white font-italic\">{{user.name}}</td>\n                  </tr>\n                  <tr>\n                    <td>Campus</td>\n                    <td class=\"font-weight-light text-white font-italic\">{{user.campus}}</td>\n                  </tr>\n                  <tr>\n                    <td>Position</td>\n                    <td class=\"font-weight-light text-white font-italic\">{{user.pos}}</td>\n                  </tr>\n\n                  <tr>\n                    <td>Cell Number</td>\n                    <td class=\"font-weight-light text-white font-italic\">{{user.cellNo}}</td>                  \n\n                  </tr>\n                  <tr>\n                    <td>WhatsApp Number</td>\n                    <td class=\"font-weight-light text-white font-italic\">{{user.whatsAppNo}}</td>                  \n                  </tr>\n                  <tr>\n                    <td>Email</td>\n                    <td class=\"font-weight-light text-white font-italic\">{{user.email}}</td>\n                  </tr>\n\n                </tbody>\n              </table>\n\n          </div>\n        <!-- /CONTACT DETAILS -->\n      </li>\n\n      <li>\n        <!-- MANAGE ACC -->\n\n          <div class=\"collapsible-header\" role=\"tab\" id=\"section2HeaderId\">\n            <p>\n              Manage Account\n            </p>\n          </div>\n          <div class=\"collapsible-body\">\n            <div class=\"card-body\">            \n\n              <div class=\"col-lg-8 col-md-12\">\n\n                <div class=\"card-panel orange darken-4 p-3 mb-4\">\n                  <p>Change Password</p>\n\n                  <div class=\"form-group\">\n                    <label for=\"op\">Old Password</label>\n                    <input type=\"password\" class=\"form-control\"  id=\"op\" v-model=\"oldPwd\">\n                  </div>\n\n                  <div class=\"form-group\">\n                    <label for=\"np\">New Password</label>\n                    <input type=\"password\" class=\"form-control\" id=\"np\" v-model=\"newPwd\">\n                  </div>\n\n                  <button class=\"btn btn-block btn-dark\" @click=\"changePwd\">Change Password</button>\n                </div>\n\n                <div class=\"grad-2 border p-2\">\n                  \n\n                  <a class=\"btn btn-block blue modal-trigger\" href=\"#editProfile\" @click=\"setUpdateVals(user)\">\n                    <i class=\"fa fa-pen\" aria-hidden=\"true\"></i> Edit Profile\n                  </a>     \n                  <a class=\"btn btn-block green mt-2 modal-trigger\" href=\"#editPos\" @click=\"setUpdateVals(user)\">\n                    <i class=\"fa fa-pen\" aria-hidden=\"true\"></i> Edit Position\n                  </a> \n                </div>\n\n              </div>\n\n            </div>\n          </div>\n\n        <!-- /MANAGE ACC -->\n      </li>\n\n    </ul>\n    <!-- /COLUMN CONTAINER -->\n\n  </div>\n\n    <!-- EDIT PROFILE -->\n    <div class=\"modal purple\" id=\"editProfile\">\n\n          <div class=\"modal-content\">\n            \n            <!-- NAME -->\n            <div class=\"form-group\">\n              <label for=\"name\"><i class=\"fa fa-tag\" aria-hidden=\"true\"></i> Name</label>\n              <input v-model=\"userUpdate.name\" type=\"text\" id=\"name\" class=\"form-control\" placeholder=\"e.g Koketso Maotomabe\" aria-describedby=\"helpName\" required>\n            </div>\n\n            <!-- CAMPUS -->\n            <div class=\"form-group\">\n              <label for=\"campus\"><i class=\"fa fa-university\" aria-hidden=\"true\"></i> Campus</label>\n              <select class=\"form-control\" id=\"campus\"  v-model=\"userUpdate.campus\" required>\n                <option v-for=\"camp in campuses\" :key=\"camp._id\" :value=\"camp.name\">{{camp.name}}</option>\n              </select>\n              <small id=\"helpName\" class=\"text-muted\">This is the campus where you are to be found</small>\n            </div>\n\n            <!-- PHONE -->\n            <div class=\"form-group\">\n              <label for=\"cNo\"><i class=\"fa fa-phone\" aria-hidden=\"true\"></i> Cellphone No.</label>\n              <input v-model=\"userUpdate.cellNo\" type=\"tel\" id=\"cNo\" class=\"form-control\" placeholder=\"e.g 0712356212\" aria-describedby=\"helpName\" required>\n              <small id=\"helpName\" class=\"text-muted\">This is the number people will use to call you when selling</small>\n            </div>\n\n            <!-- EMAIL -->\n            <div class=\"form-group\">\n              <label for=\"sM\"><i class=\"fa fa-envelope-o\" aria-hidden=\"true\"></i> Email</label>\n              <input v-model=\"userUpdate.email\" type=\"email\" id=\"sM\" class=\"form-control\" placeholder=\"e.g whatever@example.com\" aria-describedby=\"helpName\" required>\n            </div>\n\n            <!-- WHATSAPP -->\n            <div class=\"form-group\">\n              <label for=\"sWa\"><i class=\"fab fa-whatsapp\" aria-hidden=\"true\"></i> WhatsApp No.</label>\n              <input v-model=\"userUpdate.whatsAppNo\" type=\"tel\" id=\"sWa\" class=\"form-control\" placeholder=\"e.g 0623549212\" aria-describedby=\"helpName\">\n              <small id=\"helpName\" class=\"text-muted\">This is the number people will use to WhatsApp you when you are selling</small>\n            </div>\n\n\n          </div>\n\n\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn modal-close purple\" data-dismiss=\"modal\" @click=\"updateProfile\">Update</button>\n            <button type=\"button\" class=\"btn modal-close white black-text\" data-dismiss=\"modal\">Cancel</button>\n          </div>\n\n    </div>\n\n    <!-- EDIT POSITION -->\n    <div class=\"modal fade green\" id=\"editPos\">\n      \n          <div class=\"modal-content\">\n            \n            <div class=\"form-group\">\n              <label for=\"campus\"><i class=\"fa fa-tag\" aria-hidden=\"true\"></i> Position</label>\n              <select class=\"form-control\" id=\"campus\"  v-model=\"userUpdate.pos\" required>\n                <option value=\"student\">Student</option>\n                <option value=\"employee\">Employee</option>\n                <option value=\"other\">Other (please specify)</option>\n              </select>\n              <small id=\"helpName\" class=\"text-muted\">This is what you are, in the <i class=\"fa fa-university\" aria-hidden=\"true\"></i></small>\n            </div>\n\n            <!-- IF OTHER -->\n            <div class=\"form-group\" v-if=\"userUpdate.pos == 'other'\">\n              <label for=\"other\"><i class=\"fa fa-tag\" aria-hidden=\"true\"></i> Specify Position</label>\n              <input v-model=\"posOther\" type=\"tel\" id=\"other\" class=\"form-control\" aria-describedby=\"helpName\" spellcheck>\n              <small id=\"helpName\" class=\"text-muted\">This is if you chose \"other\" as your position</small>\n            </div>\n\n          </div>\n\n\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn modal-close green\" data-dismiss=\"modal\" @click=\"updatePos\">Save</button>\n            <button type=\"button\" class=\"btn modal-close white black-text\" data-dismiss=\"modal\">Close</button>\n          </div>\n\n        </div>\n      </div>\n\n      \n    <!-- /EDIT POSITION -->\n\n  \n</template>\n\n<script>\nimport {mapGetters, mapActions} from 'vuex'\n\n// exportation\nexport default {\n\n  name: \"profile\",\n\n  data() {\n    return {\n\n      user: {\n        name: null,\n        campus: null,\n        pos: null,\n        cellNo: null,\n        whatsAppNo: null,\n        email: null,\n        studentNo: null,\n        _id: null\n      },\n\n      oldPwd: \"\",\n\n      userUpdate: {\n        name: \"null\",\n        campus: null,\n        pos: null,\n        cellNo: null,\n        whatsAppNo: null,\n        email: null,\n        studentNo: null\n      },\n\n      newPwd: \"\",\n      posOther: \"\"\n\n    }\n\n  },\n\n  methods: {\n\n    ...mapActions(['getCampuses', \"DeAuth\"]),\n\n    getUser(){\n      this.$axios.get('/user/profile', this.$headers())\n        .then(res => {\n        \n          this.user = res.data.profile\n\n        })\n        .catch(err => {\n          this.$toasted.error(err, {icon: \"times-circle\"})\n        })\n    },\n\n    changePwd() {\n\n\n      if(this.newPwd.length < 4 || this.oldPwd.length < 4) {\n        this.$toasted.error(\"password must atleast be 4 charecters long\", {icon: \"times-circle\"})\n      } else {\n\n        let loader = this.$loading.show()\n\n        this.$axios.post('/user/passwordchange', {oldPwd: this.oldPwd, newPwd: this.newPwd},this.$headers()).then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})\n            this.oldPwd = \"\"\n            this.newPwd = \"\"\n          }\n\n          loader.hide()\n\n        })\n        .catch(err => {\n          this.$toasted.error(err, {icon: \"times-circle\"})\n          loader.hide()\n        })\n\n      }\n    },\n\n    setUpdateVals(values) {\n      this.userUpdate = values\n    },\n\n    updateProfile() {\n\n      let loader = this.$loading.show()\n\n      this.$axios.post('/user/profileupdate', {values: this.userUpdate, update: \"profile\"}, this.$headers()).then(res => {\n        \n        if(res.data.error) {\n          this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n        } else {\n          this.$toasted.success(res.data.message, {icon: \"check\"})\n          this.getUser()\n        }\n\n        loader.hide()\n\n      }).catch(err => {\n        this.$toasted.error(err, {icon: \"times-circle\"})\n        loader.hide()\n      })\n    },\n\n    updatePos() {\n      // carefully set postion\n      let position = this.userUpdate.pos\n      let positionOther = this.posOther\n\n      function getPos() {\n\n\n        if(position == 'other') {\n          return positionOther\n        } else {\n          return position\n        }\n      }\n\n      let loader = this.$loading.show()\n\n      this.$axios.post('/user/profileupdate', {values: {pos: getPos()}, update: \"position\"}, this.$headers())\n        .then(res => {\n\n          if(res.data.error) {\n          this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})\n            this.getUser()\n          }\n\n          loader.hide()\n\n        })\n        .catch(err => {\n\n          this.$toasted.error(err, {icon: \"times-circle\"})\n\n          loader.hide()\n\n        })\n\n    },\n\n    removeSelf() {\n\n      let loader = this.$loading.show()\n\n      this.$axios.delete('/user/rem/'+this.user._id, this.$headers())\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})\n            this.DeAuth()\n            this.$router.replace(\"/\")\n          }\n\n          loader.hide()\n\n        }).catch(err => {\n          loader.hide()\n          this.$toasted.error(err, {icon: \"times-circle\"})\n        })\n\n    }\n\n  },\n  // end of methods\n\n  async created() {\n\n    let loader = this.$loading.show()\n\n    await this.getUser()\n    await this.getCampuses()\n\n    loader.hide()\n\n  },\n\n  async beforeMount() { \n    await this.getCampuses()\n    await this.getUser()\n    return false\n  },\n\n  computed: mapGetters(['campuses', 'authInfo'])\n\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/components/auth"}]}