{"remainingRequest":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\src\\components\\ads\\singleAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\src\\components\\ads\\singleAd.vue","mtime":1584870945424},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapGetters, mapActions} from 'vuex'\nimport config from '../../config/config'\nimport authService from '../../services/auth'\nimport vueGallery from 'vue-gallery-slideshow'\nimport adManager from './adManager'\nimport getDate from '../../services/dateGet'\nimport recentAds from './recentAds'\n\nexport default {\n\n  name: \"singlead\",\n\n  components: {\n    vueGallery,\n    adManager,\n    recentAds\n  },\n\n  data() {\n    return {\n      adv: {\n        name: '',\n        campus: '',\n        price: '',\n        description: '',\n        quantity: null,\n        _id: null,\n        seller: null,\n        category: null\n      },\n\n      seller: {\n        pos: null,\n        email: '',\n        whatsAppNo: null,\n        cellNo: null\n      },\n\n      images: [],\n\n      category: {\n        name: null,\n        icon: null\n      },\n\n      index: null,\n\n      posted: \"\",\n\n      authorised: false\n\n    }\n  },\n\n  methods: {\n\n    ...mapActions(['getAd']),\n\n    setImages(imageArr) {\n\n      this.images = []\n\n      for(let i = 0; i < imageArr.length; i++) {\n        this.images.push(config.axiosConf.baseURL+imageArr[i].path)\n      }\n    },\n\n    async getCategory(cat) {\n      let res = await this.$axios.get('/category/one/'+cat)\n      this.category.name = res.data.category.name\n      this.category.icon = \"fas fa fa-\" + res.data.category.icon\n    },\n\n    whenDone() {\n      this.$router.replace(\"/\")\n    },\n\n    getSeller(id) {\n      this.$axios('/user/seller/'+id)\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n\n            this.seller = res.data.seller\n\n          }\n\n        }).catch(err => {\n          // toast\n          this.$toasted.error(err,{icon: \"times-circle\"})\n        })\n    },\n\n    async postLoad() {\n      await this.getAd(this.$route.params.adId)\n      this.adv = await this.ad\n      await this.getCategory(this.adv.category)\n      await this.setImages(this.ad.images)\n      await this.getSeller(this.adv.seller)\n      this.posted = await getDate(this.adv.added)\n    }\n\n\n  },\n\n  computed: mapGetters(['authInfo', 'ad']),\n\n\n  async created(){\n\n    let loader = this.$loading.show()\n    await this.postLoad()\n    loader.hide()\n\n  },\n\n  watch: {\n    async $route() {\n    \n      let loader = this.$loading.show()\n\n      await this.postLoad()\n      \n      scroll(0,0)\n\n      loader.hide()\n\n    }\n  }\n\n\n}\n",{"version":3,"sources":["singleAd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA","file":"singleAd.vue","sourceRoot":"src/components/ads","sourcesContent":["<template>\n  \n  <div>\n\n    <navigation />\n\n    <div class=\"container\">\n\n      <div class=\"card-panel purple white-text\">\n        <p>{{adv.name}}</p>\n        <p><i class=\"fas fa-clock\"></i> Posted {{posted}} | <i class=\"fa fa-university\" aria-hidden=\"true\"></i> {{adv.campus}}</p>\n        <h4>R {{adv.price}}</h4>\n      </div>\n      \n      <div class=\"row\">\n\n          <div class=\"card blue col l8 s12\">\n            <div class=\"flex\">\n              <img class=\"cp\" v-if=\"images.length > 0\" :src=\"images[0]\" alt=\"\" @click=\"index = 0\">\n              <span v-else class=\"p-4\"><i class=\"fa fa-image fa-4x\"></i> <br> No image</span>\n            </div>\n\n          </div>\n       \n      \n          <div class=\"col l4\">            \n\n            <p class=\"card-panel orange\">{{adv.description}}</p>\n\n            <div class=\"card-panel green\">\n              <p><i class=\"fab fa-whatsapp\"></i> {{seller.whatsAppNo}}</p>    \n              <p><i class=\"fa fas fa-phone\"></i> {{seller.cellNo}}</p>   \n              <p><i class=\"fa fab fa-envelope\"></i> {{seller.email}}</p>         \n              <p></p> \n            </div>\n\n            <div class=\"yellow\">\n              <adManager \n                :id=\"adv._id\" \n                :isDone=\"whenDone\" \n                v-if=\"authInfo.loggedIn && (authInfo._id == adv.seller || authInfo.position == 'admin')\" \n              />\n            </div>\n\n            <!-- <button class=\"btn btn-primary mt-3\" @click=\"share\"><i class=\"fa fa-share\" aria-hidden=\"true\"></i> Share</button> -->\n            \n          </div>\n      \n      </div>\n\n      <vueGallery :images=\"images\" :index=\"index\" @close=\"index = null\"/>\n    \n      <hr>\n\n      <recentAds />\n\n    </div>\n\n  </div>\n\n</template>\n\n<script>\nimport {mapGetters, mapActions} from 'vuex'\nimport config from '../../config/config'\nimport authService from '../../services/auth'\nimport vueGallery from 'vue-gallery-slideshow'\nimport adManager from './adManager'\nimport getDate from '../../services/dateGet'\nimport recentAds from './recentAds'\n\nexport default {\n\n  name: \"singlead\",\n\n  components: {\n    vueGallery,\n    adManager,\n    recentAds\n  },\n\n  data() {\n    return {\n      adv: {\n        name: '',\n        campus: '',\n        price: '',\n        description: '',\n        quantity: null,\n        _id: null,\n        seller: null,\n        category: null\n      },\n\n      seller: {\n        pos: null,\n        email: '',\n        whatsAppNo: null,\n        cellNo: null\n      },\n\n      images: [],\n\n      category: {\n        name: null,\n        icon: null\n      },\n\n      index: null,\n\n      posted: \"\",\n\n      authorised: false\n\n    }\n  },\n\n  methods: {\n\n    ...mapActions(['getAd']),\n\n    setImages(imageArr) {\n\n      this.images = []\n\n      for(let i = 0; i < imageArr.length; i++) {\n        this.images.push(config.axiosConf.baseURL+imageArr[i].path)\n      }\n    },\n\n    async getCategory(cat) {\n      let res = await this.$axios.get('/category/one/'+cat)\n      this.category.name = res.data.category.name\n      this.category.icon = \"fas fa fa-\" + res.data.category.icon\n    },\n\n    whenDone() {\n      this.$router.replace(\"/\")\n    },\n\n    getSeller(id) {\n      this.$axios('/user/seller/'+id)\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n\n            this.seller = res.data.seller\n\n          }\n\n        }).catch(err => {\n          // toast\n          this.$toasted.error(err,{icon: \"times-circle\"})\n        })\n    },\n\n    async postLoad() {\n      await this.getAd(this.$route.params.adId)\n      this.adv = await this.ad\n      await this.getCategory(this.adv.category)\n      await this.setImages(this.ad.images)\n      await this.getSeller(this.adv.seller)\n      this.posted = await getDate(this.adv.added)\n    }\n\n\n  },\n\n  computed: mapGetters(['authInfo', 'ad']),\n\n\n  async created(){\n\n    let loader = this.$loading.show()\n    await this.postLoad()\n    loader.hide()\n\n  },\n\n  watch: {\n    async $route() {\n    \n      let loader = this.$loading.show()\n\n      await this.postLoad()\n      \n      scroll(0,0)\n\n      loader.hide()\n\n    }\n  }\n\n\n}\n</script>\n\n<style scoped>\n\n  img {\n    transition-property: all!important;\n    transition-duration: 0.3s!important;\n  }\n\n  .card {\n    border-radius: 0px !important;\n  }\n\n  .alert {\n    text-shadow: none;\n  }\n\n\n  .carousel img {\n    width: auto;\n    max-width: 100%;\n    max-height: 100%;\n\n  }\n\n  .modal-body {\n    height: 70vh !important;\n    overflow: hidden;\n  }\n\n  \n\n  @media (min-width: 992px) {\n    .card-info {\n      position: absolute !important;\n      top: 0px !important;\n      width: 100%;\n      padding-bottom: 20px;\n    }\n\n    .card:hover .card-info {\n      opacity: 0.5;\n    }\n\n    .card {\n      max-height: 70vh !important;\n      overflow: hidden;\n    }\n\n    .card img {\n      max-height: 55vh;\n      max-width: 100%;\n    }\n\n    /* .card-info-sm {\n      display: none;\n    } */\n  }\n\n  @media (max-width: 990.5px) {\n    .card {\n      max-height: 70vh !important;\n      overflow: hidden;\n    }\n\n    .card img {\n      max-height: 55vh;\n      max-width: 100%;\n    }\n\n    .card-info {\n      display: none;\n    }\n\n    \n  }\n\n  .m-fix {\n      margin-left: 1px;\n      margin-right: 1px;\n    }\n\n  \n\n</style>\n"]}]}