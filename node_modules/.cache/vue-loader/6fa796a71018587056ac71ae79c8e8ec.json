{"remainingRequest":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\UJmarketplace\\src\\components\\ads\\allAds.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\src\\components\\ads\\allAds.vue","mtime":1589898072422},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmarketplace\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport moment from 'moment'\nimport {mapActions, mapGetters} from 'vuex'\n\nlet opts = {\n  page: 1,\n  category: \"all\",\n  campus: \"all\"\n}\n\nexport default {\n\n  name: \"allAdds\",\n  data() {\n    return {\n\n      baseUrl: this.$baseUrl,\n      page: 1,\n      category: \"all\",\n      campus: \"all\",\n      categoryName: \"all categories\",\n      campusName: \"all campuses\"\n\n    }\n\n\n  }, \n\n  computed: mapGetters(['categories', 'campuses', 'allAds']),\n\n  methods: {\n\n    ...mapActions(['getCategories', 'getCampuses', 'getAllAds']),\n\n    getDate(date) {\n      return moment(date).fromNow()\n    },\n\n    async gotopage(pageNum) {\n      \n      let loader = this.$loading.show()\n\n      opts.page = pageNum\n      await this.getAllAds(opts)\n      loader.hide()\n\n      scroll(0,0)\n    },\n\n    async getName(id, arr, obj, c) {\n\n      if(id == \"all\") {\n        obj.name = id + \" \" + c\n      } else if(id.length < 12) {\n        obj.name = id\n        return false\n      }\n\n      await arr.forEach(element => {\n        \n        if(element._id == id) {          \n          obj.name = element.name\n        }\n\n      })\n\n\n    }\n\n  },\n\n  async created() {\n    \n    let loader = this.$loading.show()\n\n    opts.page = await this.$route.params.page\n    this.page = await this.$route.params.page\n\n    opts.category = await this.$route.params.cat\n    this.category = await this.$route.params.cat\n\n    opts.campus = await this.$route.params.camp\n    this.campus = await this.$route.params.camp\n\n    await this.getAllAds(opts)\n    await this.getCategories()\n    await this.getCampuses()\n\n    let obj = {}\n    await this.getName(opts.campus, this.campuses, obj, \"campuses\")\n    this.campusName = obj.name\n    await this.getName(opts.category, this.categories, obj, \"categories\")\n    this.categoryName = obj.name\n\n\n\n\n    loader.hide()\n\n  },\n\n  watch : {\n    \n    category () {\n\n      this.$router.push(`/browseads/1/${this.category}/${this.campus}`)\n      scroll(0,0)\n\n    },\n\n    campus() {\n\n      this.$router.push(`/browseads/1/${this.category}/${this.campus}`)\n      scroll(0,0)\n\n    },\n\n    async $route () {\n      let loader = this.$loading.show()\n\n      opts.page = await this.$route.params.page\n      this.page = await this.$route.params.page\n\n      opts.category = await this.$route.params.cat\n      this.category = await this.$route.params.cat\n\n      opts.campus = await this.$route.params.camp\n      this.campus = await this.$route.params.camp\n\n      let obj = {}\n      await this.getName(opts.campus, this.campuses, obj, \"campuses\")\n      this.campusName = obj.name\n      await this.getName(opts.category, this.categories, obj, \"categories\")\n      this.categoryName = obj.name\n\n      scroll(0,0)\n      await this.getAllAds(opts)\n\n      loader.hide()\n    }\n\n  }\n\n}\n",{"version":3,"sources":["allAds.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA","file":"allAds.vue","sourceRoot":"src/components/ads","sourcesContent":["<template>\n  <div class=\"mt-2\">\n\n\n \n      <div class=\"dropdown-content\" id=\"catOpts\">\n        <ul class=\"black-text\">\n\n            <li @click=\"category = 'all'; categoryName = 'all categories'\">\n              <a>All</a>\n            </li>\n            <li\n              v-for=\"category_ in categories\" \n              :key=\"category_._id\"\n              @click=\"category = category_._id; categoryName = category_.name\"\n            >\n              <a>{{category_.name}}</a>\n            </li>\n \n        </ul>\n      </div>\n        \n      <div class=\"dropdown-content\" id=\"camOpts\">\n        <ul class=\"black-text\">\n\n            <li @click=\"campus = 'all'; campusName = 'all campuses'\">\n              <a>All</a>\n            </li>\n            <li\n              v-for=\"campus_ in campuses\" \n              :key=\"campus_._id\"\n              @click=\"campus = campus_._id; campusName = campus_.name\"\n            >\n              <a>{{campus_.name}}</a>\n            </li>\n \n        </ul>\n      </div>\n        \n    \n\n        <div class=\"card-panel\">\n          <a href=\"javascript:void(0)\" class=\"dropdown-trigger btn blue m-1\" data-target=\"catOpts\">{{categoryName}} <i class=\"fas fa-caret-down\"></i></a> &nbsp;\n          <a href=\"javascript:void(0)\" class=\"dropdown-trigger btn blue m-1\" data-target=\"camOpts\">{{campusName}} <i class=\"fas fa-caret-down\"></i></a>\n        </div>\n\n\n\n    <div class=\"row\">\n\n      <div \n        class=\"col item l4 s12 m6\"\n        v-for=\"ad in allAds.ads\"\n        :key=\"ad._id\"\n        @click=\"$router.push('/ad/'+ad._id)\"\n      >\n        <div class=\"cursor mt-2\">\n          <div>\n            <div class=\"img-cont flex purple\">\n              <img :src=\"baseUrl+ad.images[0].path\" alt=\"\" v-if=\"ad.images.length > 0\">\n              <p v-else class=\"py-5 m-0\">\n                <i class=\"fa fa-image fa-4x\" aria-hidden=\"true\"></i>\n                <br>\n                No image\n              </p>\n            </div>\n            <div class=\"white-text orange darken-4 p-1\">\n              <p class=\"truncate\">{{ad.name}}</p>\n              <p class=\"truncate\"><i class=\"fa fa-clock\" aria-hidden=\"true\"></i> {{getDate(ad.added)}} | <i class=\"fa fa-university\" aria-hidden=\"true\"></i> {{ad.campus}}</p>\n              <p class=\"truncate\">R {{ad.price}}</p>\n            </div>\n\n          </div>\n        </div>\n      </div>\n      \n\n    </div>\n\n    <paginate\n      v-if=\"allAds.pages > 1\"\n      :page-count=\"allAds.pages\"\n      :click-handler=\"gotopage\"\n      container-class=\"pagination mt-2\"\n      page-class=\"page-item blue white-text waves-effect\"\n      page-link-class=\"page-link white-text\"\n      prev-class=\"page-item \"\n      prev-link-class=\"page-link bg-dark text-white\"\n      next-class=\"page-item \"\n      next-link-class=\"page-link bg-dark text-white\"\n      active-class=\"blue darken-4\"\n      \n    />\n\n    <div v-if=\"allAds.ads.length == 0\" class=\"center purple p-2 mt-2\">\n      <p class=\"text-center py-5\">\n        <i class=\"fa fa-box-open fa-4x\" aria-hidden=\"true\"></i>\n        <br> No ads found\n      </p>\n    </div>\n\n\n\n  </div>\n</template>\n\n<script>\nimport moment from 'moment'\nimport {mapActions, mapGetters} from 'vuex'\n\nlet opts = {\n  page: 1,\n  category: \"all\",\n  campus: \"all\"\n}\n\nexport default {\n\n  name: \"allAdds\",\n  data() {\n    return {\n\n      baseUrl: this.$baseUrl,\n      page: 1,\n      category: \"all\",\n      campus: \"all\",\n      categoryName: \"all categories\",\n      campusName: \"all campuses\"\n\n    }\n\n\n  }, \n\n  computed: mapGetters(['categories', 'campuses', 'allAds']),\n\n  methods: {\n\n    ...mapActions(['getCategories', 'getCampuses', 'getAllAds']),\n\n    getDate(date) {\n      return moment(date).fromNow()\n    },\n\n    async gotopage(pageNum) {\n      \n      let loader = this.$loading.show()\n\n      opts.page = pageNum\n      await this.getAllAds(opts)\n      loader.hide()\n\n      scroll(0,0)\n    },\n\n    async getName(id, arr, obj, c) {\n\n      if(id == \"all\") {\n        obj.name = id + \" \" + c\n      } else if(id.length < 12) {\n        obj.name = id\n        return false\n      }\n\n      await arr.forEach(element => {\n        \n        if(element._id == id) {          \n          obj.name = element.name\n        }\n\n      })\n\n\n    }\n\n  },\n\n  async created() {\n    \n    let loader = this.$loading.show()\n\n    opts.page = await this.$route.params.page\n    this.page = await this.$route.params.page\n\n    opts.category = await this.$route.params.cat\n    this.category = await this.$route.params.cat\n\n    opts.campus = await this.$route.params.camp\n    this.campus = await this.$route.params.camp\n\n    await this.getAllAds(opts)\n    await this.getCategories()\n    await this.getCampuses()\n\n    let obj = {}\n    await this.getName(opts.campus, this.campuses, obj, \"campuses\")\n    this.campusName = obj.name\n    await this.getName(opts.category, this.categories, obj, \"categories\")\n    this.categoryName = obj.name\n\n\n\n\n    loader.hide()\n\n  },\n\n  watch : {\n    \n    category () {\n\n      this.$router.push(`/browseads/1/${this.category}/${this.campus}`)\n      scroll(0,0)\n\n    },\n\n    campus() {\n\n      this.$router.push(`/browseads/1/${this.category}/${this.campus}`)\n      scroll(0,0)\n\n    },\n\n    async $route () {\n      let loader = this.$loading.show()\n\n      opts.page = await this.$route.params.page\n      this.page = await this.$route.params.page\n\n      opts.category = await this.$route.params.cat\n      this.category = await this.$route.params.cat\n\n      opts.campus = await this.$route.params.camp\n      this.campus = await this.$route.params.camp\n\n      let obj = {}\n      await this.getName(opts.campus, this.campuses, obj, \"campuses\")\n      this.campusName = obj.name\n      await this.getName(opts.category, this.categories, obj, \"categories\")\n      this.categoryName = obj.name\n\n      scroll(0,0)\n      await this.getAllAds(opts)\n\n      loader.hide()\n    }\n\n  }\n\n}\n</script>\n\n<style scoped>\n\n  .img-cont {\n    height: 200px !important;  \n    overflow: hidden !important;\n  }\n\n  .img-cont img {\n    max-width: 100%;\n    max-height: 200px;\n  }\n\n  h6 {\n    font-size: 16px !important;\n  }\n\n  .row {\n    overflow: hidden;\n  }\n\n  .mt-2 {\n    margin-top: 20px;\n  }\n\n  .m-1 {\n    margin: 1.5px;\n  }\n\n  p {\n    margin: 0px;\n    \n  }\n\n\n</style>\n"]}]}