{"remainingRequest":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\UJmart\\src\\components\\ads\\singleAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\UJmart\\src\\components\\ads\\singleAd.vue","mtime":1586450940641},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapGetters, mapActions} from 'vuex'\nimport config from '../../config/config'\nimport authService from '../../services/auth'\nimport vueGallery from 'vue-gallery-slideshow'\nimport adManager from './adManager'\nimport getDate from '../../services/dateGet'\nimport recentAds from './recentAds'\n\nexport default {\n\n  name: \"singlead\",\n\n  components: {\n    vueGallery,\n    adManager,\n    recentAds\n  },\n\n  data() {\n    return {\n      adv: {\n        name: '',\n        campus: '',\n        price: '',\n        description: '',\n        quantity: null,\n        _id: null,\n        seller: null,\n        category: null\n      },\n\n      seller: {\n        pos: null,\n        email: '',\n        whatsAppNo: null,\n        cellNo: null\n      },\n\n      images: [],\n\n      category: {\n        name: null\n      },\n\n      report: {\n        category: null,\n        message: \"\",\n        reporter: null,\n        ad: null,\n        adOwner: null\n      },\n\n      index: null,\n\n      posted: \"\",\n\n      authorised: false\n\n    }\n  },\n\n  methods: {\n\n    ...mapActions(['getAd']),\n\n    setImages(imageArr) {\n\n      this.images = []\n\n      for(let i = 0; i < imageArr.length; i++) {\n        this.images.push(config.axiosConf.baseURL+imageArr[i].path)\n      }\n    },\n\n    async getCategory(cat) {\n      let res = await this.$axios.get('/category/one/'+cat)\n      this.category.name = res.data.category.name\n      this.category.icon = \"fas fa fa-\" + res.data.category.icon\n    },\n\n    whenDone() {\n      this.$router.replace(\"/\")\n    },\n\n    getSeller(id) {\n      this.$axios('/user/seller/'+id)\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n\n            this.seller = res.data.seller\n\n          }\n\n        }).catch(err => {\n          // toast\n          this.$toasted.error(err,{icon: \"times-circle\"})\n        })\n    },\n\n    async postLoad() {\n      await this.getAd(this.$route.params.adId)\n      this.adv = await this.ad\n      await this.getCategory(this.adv.category)\n      await this.setImages(this.ad.images)\n      await this.getSeller(this.adv.seller)\n      this.posted = await getDate(this.adv.added)\n    },\n\n    async reportMake() {\n      this.report.ad = this.ad._id\n      this.report.adOwner = this.ad.seller\n      let res = await this.$axios.post(\"/report/add\", this.report, this.$headers())\n      if (res.data.error) {\n        this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n      } else {\n        this.$toasted.success(res.data.message, {icon: \"check\"})            \n      }\n    }\n\n\n  },\n\n  computed: mapGetters(['authInfo', 'ad']),\n\n\n  async created(){\n\n    let loader = this.$loading.show()\n    await this.postLoad()\n    loader.hide()\n\n  },\n\n  watch: {\n    async $route() {\n    \n      let loader = this.$loading.show()\n\n      await this.postLoad()\n      \n      scroll(0,0)\n\n      loader.hide()\n\n    }\n  }\n\n\n}\n",{"version":3,"sources":["singleAd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA","file":"singleAd.vue","sourceRoot":"src/components/ads","sourcesContent":["<template>\n  \n  <div>\n\n    <div class=\"container\">\n\n      <div class=\"card-panel purple white-text\">\n        <p>{{adv.name}}</p>\n        <p><i class=\"fas fa-clock\"></i> Posted {{posted}} | <i class=\"fa fa-university\" aria-hidden=\"true\"></i> {{adv.campus}}</p>\n        <p>R {{adv.price}}</p>\n      </div>\n      \n      <div class=\"row blue p-2\">\n\n          <div class=\"card blue col l8 s12 main\">\n            <div class=\"flex\">\n              <img class=\"cp\" v-if=\"images.length > 0\" :src=\"images[0]\" alt=\"\" @click=\"index = 0\">\n              <span v-else class=\"p-4 center\"><i class=\"fa fa-image fa-4x\"></i> <br> No image</span>\n              <div class=\"overlay\" v-if=\"images.length > 1\">1 / {{images.length}}</div>\n            </div>\n\n          </div>\n       \n      \n          <div class=\"col s12 l4 side\">            \n\n            <div class=\"card-panel\">\n              <p class=\"green-text\"><i class=\"fab fa-whatsapp\"></i> {{seller.whatsAppNo}}</p>    \n              <p class=\"blue-text\">\n                <a :href=\"'tel:'+seller.cellNo\"><i class=\"fa fas fa-phone\"></i> {{seller.cellNo}}</a>\n              </p>   \n              <p class=\"blue-text text-darken-4\">\n                <a :href=\"'mailto:'+seller.email\"><i class=\"fa fab fa-envelope\"></i> {{seller.email}}</a>\n              </p>                     \n            </div>\n\n            <div class=\"purple lighten-3\">\n              <adManager \n                :id=\"adv._id\" \n                :isDone=\"whenDone\" \n                v-if=\"authInfo.loggedIn && (authInfo._id == adv.seller || authInfo.position == 'admin')\" \n              />\n            </div>\n\n            <!-- <button class=\"btn btn-primary mt-3\" @click=\"share\"><i class=\"fa fa-share\" aria-hidden=\"true\"></i> Share</button> -->\n            <a href=\"#reportMod\" class=\"btn block red modal-trigger mt-2\">Report</a>\n            \n          </div>\n\n\n      \n      </div>\n            <div class=\"card-panel yellow darken-4\">\n              \n              <p><b>Description: </b></p>\n              <p v-if=\"adv.description.length != 0\">{{adv.description}}</p>\n              <p v-else>None given.</p>\n\n            </div>\n\n      <div class=\"modal purple\" id=\"reportMod\">\n        <div class=\"modal-content\">\n          <p>Category</p>\n          <select v-model=\"report.category\">\n            <option value=\"Nudity\">Nudity</option>\n            <option value=\"Drugs\">Drugs</option>\n            <option value=\"Scam\">Scam</option>\n            <option value=\"Violence\">Violence</option>\n            <option value=\"Other\">Other</option>\n          </select>\n\n          <p>More description</p>\n          <textarea v-model=\"report.message\"></textarea>\n\n          <p>Your Email</p>\n          <input v-model=\"report.reporter\">\n\n        </div>\n        <div class=\"modal-footer\">\n          <button class=\"modal-close btn purple\" @click=\"reportMake()\">\n            Report</button>\n          <button class=\"modal-close btn white black-text\">\n            Cancel\n          </button>\n        </div>\n      </div>\n\n      <vueGallery :images=\"images\" :index=\"index\" @close=\"index = null\"/>\n    \n     \n\n      <recentAds :category=\"adv.category\" />\n\n    </div>\n\n  </div>\n\n</template>\n\n<script>\nimport {mapGetters, mapActions} from 'vuex'\nimport config from '../../config/config'\nimport authService from '../../services/auth'\nimport vueGallery from 'vue-gallery-slideshow'\nimport adManager from './adManager'\nimport getDate from '../../services/dateGet'\nimport recentAds from './recentAds'\n\nexport default {\n\n  name: \"singlead\",\n\n  components: {\n    vueGallery,\n    adManager,\n    recentAds\n  },\n\n  data() {\n    return {\n      adv: {\n        name: '',\n        campus: '',\n        price: '',\n        description: '',\n        quantity: null,\n        _id: null,\n        seller: null,\n        category: null\n      },\n\n      seller: {\n        pos: null,\n        email: '',\n        whatsAppNo: null,\n        cellNo: null\n      },\n\n      images: [],\n\n      category: {\n        name: null\n      },\n\n      report: {\n        category: null,\n        message: \"\",\n        reporter: null,\n        ad: null,\n        adOwner: null\n      },\n\n      index: null,\n\n      posted: \"\",\n\n      authorised: false\n\n    }\n  },\n\n  methods: {\n\n    ...mapActions(['getAd']),\n\n    setImages(imageArr) {\n\n      this.images = []\n\n      for(let i = 0; i < imageArr.length; i++) {\n        this.images.push(config.axiosConf.baseURL+imageArr[i].path)\n      }\n    },\n\n    async getCategory(cat) {\n      let res = await this.$axios.get('/category/one/'+cat)\n      this.category.name = res.data.category.name\n      this.category.icon = \"fas fa fa-\" + res.data.category.icon\n    },\n\n    whenDone() {\n      this.$router.replace(\"/\")\n    },\n\n    getSeller(id) {\n      this.$axios('/user/seller/'+id)\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n\n            this.seller = res.data.seller\n\n          }\n\n        }).catch(err => {\n          // toast\n          this.$toasted.error(err,{icon: \"times-circle\"})\n        })\n    },\n\n    async postLoad() {\n      await this.getAd(this.$route.params.adId)\n      this.adv = await this.ad\n      await this.getCategory(this.adv.category)\n      await this.setImages(this.ad.images)\n      await this.getSeller(this.adv.seller)\n      this.posted = await getDate(this.adv.added)\n    },\n\n    async reportMake() {\n      this.report.ad = this.ad._id\n      this.report.adOwner = this.ad.seller\n      let res = await this.$axios.post(\"/report/add\", this.report, this.$headers())\n      if (res.data.error) {\n        this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n      } else {\n        this.$toasted.success(res.data.message, {icon: \"check\"})            \n      }\n    }\n\n\n  },\n\n  computed: mapGetters(['authInfo', 'ad']),\n\n\n  async created(){\n\n    let loader = this.$loading.show()\n    await this.postLoad()\n    loader.hide()\n\n  },\n\n  watch: {\n    async $route() {\n    \n      let loader = this.$loading.show()\n\n      await this.postLoad()\n      \n      scroll(0,0)\n\n      loader.hide()\n\n    }\n  }\n\n\n}\n</script>\n\n<style scoped>\n\n  img {\n    transition-property: all!important;\n    transition-duration: 0.3s!important;\n  }\n\n  .card {\n    border-radius: 0px !important;\n  }\n\n  .alert {\n    text-shadow: none;\n  }\n\n\n  .carousel img {\n    width: auto;\n    max-width: 100%;\n    max-height: 100%;\n\n  }\n\n  .modal-body {\n    height: 70vh !important;\n    overflow: hidden;\n  }\n\n  \n\n  @media (min-width: 992px) {\n    .card-info {\n      position: absolute !important;\n      top: 0px !important;\n      width: 100%;\n      padding-bottom: 20px;\n    }\n\n    .card:hover .card-info {\n      opacity: 0.5;\n    }\n\n    .card {\n      max-height: 70vh !important;\n      overflow: hidden;\n    }\n\n    .card img {\n      max-height: 56vh;\n      max-width: 100%;\n    }\n\n    /* .card-info-sm {\n      display: none;\n    } */\n  }\n\n/* \n  .flex {\n    min-height: 300px !important;\n    max-height: 350px !important;\n  } */\n  \n\n  @media (max-width: 991.5px) {\n    .card {\n      max-height: 100% !important;\n      overflow: hidden;\n    }\n\n    .card img {\n      max-height: 200px;\n      max-width: 100%;\n    }\n\n    .card.main {\n      box-shadow: 0 0 0 #000 !important;\n    }\n\n    .card-info {\n      display: none;\n    }\n\n    /* .flex {\n      min-height: 100% !important\n    } */\n  \n    .p-2 {\n      padding: 10px;\n    }\n\n    \n  }\n\n  @media (min-width: 992px) {\n\n      .flex {\n        height: 100% !important;\n      }\n\n      .main {\n\n        height: 300px !important;\n        max-height: 400px !important;\n        display: block;\n      }\n    \n  }\n\n  .card-panel {\n    display: block !important;\n    width: 100% !important;\n    padding-top: 10px;\n    padding-bottom: 10px;\n  }\n\n  .overlay {\n    position: absolute;\n    bottom: 0px;\n    left: 0px;\n    width: 100%;\n    background: rgba(0, 0, 0, 0.644);\n    color: white;\n    padding: 6px;\n    text-align: center;\n  }\n\n  \n\n</style>\n"]}]}