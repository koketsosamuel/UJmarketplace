{"remainingRequest":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\src\\components\\auth\\profile.vue?vue&type=style&index=0&id=7532495c&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\src\\components\\auth\\profile.vue","mtime":1566765111000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable tr {\n  border: 0px solid #000;\n}\n\n.card, .card-body table tr {\n  border-radius: 0px !important;\n  text-shadow: #000 0px 0px 0px;\n  color: #fff;\n}\n\n.grad {\n  text-shadow: #000 0px 0px 0px;\n}\n\n.grad-4 {\n  border-right: 10px solid #FF4500;\n  text-shadow: rgb(255, 255, 255) 0px 0px 0px;\n}\n\n\n\n\n",{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAieA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"profile.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\n  \n<div>\n\n  <navigation />\n\n  <div class=\"col-10 col-md-8 mx-auto form bg-dark p-4 text-orange\" style=\"margin-top:60px\">\n\n    <h2>\n      <span class=\"float-left\"><i class=\"fa fa-user  d-inline\"></i> Profile</span>\n      <router-link to=\"/\">\n        <span class=\"float-right btn btn-primary\"><i class=\"fa fa-home\" aria-hidden=\"true\"></i> Home</span>\n      </router-link>\n    </h2>\n    <div class=\"clearfix\"></div>\n    <hr>\n\n    <div id=\"accordianId\" role=\"tablist\" aria-multiselectable=\"true\" class=\"text-white\">\n\n      <!-- PERSONAL DETAILS -->\n      <div class=\"card grad\">\n        <div class=\"card-header\" role=\"tab\" id=\"section1HeaderId\">\n          <h5 class=\"mb-0\">\n            <a data-toggle=\"collapse\" data-parent=\"#accordianId\" href=\"#section1ContentId\" aria-expanded=\"true\" aria-controls=\"section1ContentId\" class=\"text-white\">\n              <i class=\"fa fa-user\" aria-hidden=\"true\"></i> Personal Details\n            </a>\n          </h5>\n        </div>\n        <div id=\"section1ContentId\" class=\"collapse in show\" role=\"tabpanel\" aria-labelledby=\"section1HeaderId\">\n          <div class=\"card-body grad-4\">\n            <table class=\"table table-responsive\">\n              <tbody>\n                <tr>\n                  <td>Name</td>\n                  <td class=\"font-weight-light text-white font-italic\">{{user.name}}</td>\n                </tr>\n                <tr>\n                  <td>Campus</td>\n                  <td class=\"font-weight-light text-white font-italic\">{{user.campus}}</td>\n                </tr>\n                <tr>\n                  <td>Position</td>\n                  <td class=\"font-weight-light text-white font-italic\">{{user.pos}}</td>\n                </tr>\n\n                <tr>\n                  <td>Cell Number</td>\n                  <td class=\"font-weight-light text-white font-italic\">{{user.cellNo}}</td>                  \n\n                </tr>\n                <tr>\n                  <td>WhatsApp Number</td>\n                  <td class=\"font-weight-light text-white font-italic\">{{user.whatsAppNo}}</td>                  \n                </tr>\n                <tr>\n                  <td>Email</td>\n                  <td class=\"font-weight-light text-white font-italic\">{{user.email}}</td>\n                </tr>\n\n              </tbody>\n            </table>\n\n          </div>\n        </div>\n      </div>\n      <!-- /CONTACT DETAILS -->\n\n      <!-- MANAGE ACC -->\n      <div class=\"card grad\">\n        <div class=\"card-header\" role=\"tab\" id=\"section2HeaderId\">\n          <h5 class=\"mb-0\">\n            <a data-toggle=\"collapse\" data-parent=\"#accordianId\" href=\"#section2ContentId\" aria-expanded=\"true\" aria-controls=\"section2ContentId\" class=\"text-white\">\n              <i class=\"fa fa-gear\" aria-hidden=\"true\"></i> Manage Account | <i class=\"fa fa-id-card\" aria-hidden=\"true\"></i> {{user.studentNo}}\n            </a>\n          </h5>\n        </div>\n        <div id=\"section2ContentId\" class=\"collapse in show\" role=\"tabpanel\" aria-labelledby=\"section2HeaderId\">\n          <div class=\"card-body grad-4\">            \n\n            <div class=\"col-lg-8 col-md-12\">\n\n              <div class=\"grad-3 p-3 mb-4\">\n                <h4>Change Password</h4>\n\n                <div class=\"form-group\">\n                  <label for=\"op\">Old Password</label>\n                  <input type=\"password\" class=\"form-control\"  id=\"op\" v-model=\"oldPwd\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"np\">New Password</label>\n                  <input type=\"password\" class=\"form-control\" id=\"np\" v-model=\"newPwd\">\n                </div>\n\n                <button class=\"btn btn-block btn-dark\" @click=\"changePwd\">Change Password</button>\n              </div>\n\n              <div class=\"grad-2 border p-2\">\n                \n\n                <button class=\"btn btn-block btn-info\" data-toggle=\"modal\" data-target=\"#editProfile\" @click=\"setUpdateVals(user)\">\n                  <i class=\"fa fa-pen\" aria-hidden=\"true\"></i> Edit Profile\n                </button>     \n                <button class=\"btn btn-block btn-success\" data-toggle=\"modal\" data-target=\"#editPos\" @click=\"setUpdateVals(user)\">\n                  <i class=\"fa fa-pen\" aria-hidden=\"true\"></i> Edit Position\n                </button> \n                <button class=\"btn btn-block btn-dark red\" data-toggle=\"modal\" data-target=\"#remAcc\">\n                  <i class=\"fa fa-trash\" aria-hidden=\"true\"></i> Delete Account\n                </button>\n              </div>\n\n            </div>\n\n          </div>\n        </div>\n      </div>\n      <!-- /MANAGE ACC -->\n\n    </div>\n    <!-- /COLUMN CONTAINER -->\n\n    <!-- EDIT PROFILE -->\n    <div class=\"modal fade\" id=\"editProfile\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modelTitleId\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content bg-dark border-0 text-white\">\n          <div class=\"modal-header border-0\">\n            <h5 class=\"modal-title text-orange\"><i class=\"fa fa-pen\"></i> Profile</h5>\n              <button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n          </div>\n\n\n          <div class=\"modal-body\">\n            \n            <!-- NAME -->\n            <div class=\"form-group\">\n              <label for=\"name\"><i class=\"fa fa-tag\" aria-hidden=\"true\"></i> Name</label>\n              <input v-model=\"userUpdate.name\" type=\"text\" id=\"name\" class=\"form-control\" placeholder=\"e.g Koketso Maotomabe\" aria-describedby=\"helpName\" required>\n            </div>\n\n            <!-- CAMPUS -->\n            <div class=\"form-group\">\n              <label for=\"campus\"><i class=\"fa fa-university\" aria-hidden=\"true\"></i> Campus</label>\n              <select class=\"form-control\" id=\"campus\"  v-model=\"userUpdate.campus\" required>\n                <option v-for=\"camp in campuses\" :key=\"camp._id\" :value=\"camp.name\">{{camp.name}}</option>\n              </select>\n              <small id=\"helpName\" class=\"text-muted\">This is the campus where you are to be found</small>\n            </div>\n\n            <!-- PHONE -->\n            <div class=\"form-group\">\n              <label for=\"cNo\"><i class=\"fa fa-phone\" aria-hidden=\"true\"></i> Cellphone No.</label>\n              <input v-model=\"userUpdate.cellNo\" type=\"tel\" id=\"cNo\" class=\"form-control\" placeholder=\"e.g 0712356212\" aria-describedby=\"helpName\" required>\n              <small id=\"helpName\" class=\"text-muted\">This is the number people will use to call you when selling</small>\n            </div>\n\n            <!-- EMAIL -->\n            <div class=\"form-group\">\n              <label for=\"sM\"><i class=\"fa fa-envelope-o\" aria-hidden=\"true\"></i> Email</label>\n              <input v-model=\"userUpdate.email\" type=\"email\" id=\"sM\" class=\"form-control\" placeholder=\"e.g whatever@example.com\" aria-describedby=\"helpName\" required>\n            </div>\n\n            <!-- WHATSAPP -->\n            <div class=\"form-group\">\n              <label for=\"sWa\"><i class=\"fab fa-whatsapp\" aria-hidden=\"true\"></i> WhatsApp No.</label>\n              <input v-model=\"userUpdate.whatsAppNo\" type=\"tel\" id=\"sWa\" class=\"form-control\" placeholder=\"e.g 0623549212\" aria-describedby=\"helpName\">\n              <small id=\"helpName\" class=\"text-muted\">This is the number people will use to WhatsApp you when you are selling</small>\n            </div>\n\n\n          </div>\n\n\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\" @click=\"updateProfile\">Save</button>\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <!-- EDIT POSITION -->\n    <div class=\"modal fade\" id=\"editPos\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modelTitleId\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content bg-dark border-0 text-white\">\n          <div class=\"modal-header border-0\">\n            <h5 class=\"modal-title text-orange\"><i class=\"fa fa-pen\"></i> Position</h5>\n              <button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n          </div>\n\n\n          <div class=\"modal-body\">\n            \n            <div class=\"form-group\">\n              <label for=\"campus\"><i class=\"fa fa-tag\" aria-hidden=\"true\"></i> Position</label>\n              <select class=\"form-control\" id=\"campus\"  v-model=\"userUpdate.pos\" required>\n                <option value=\"student\">Student</option>\n                <option value=\"employee\">Employee</option>\n                <option value=\"other\">Other (please specify)</option>\n              </select>\n              <small id=\"helpName\" class=\"text-muted\">This is what you are, in the <i class=\"fa fa-university\" aria-hidden=\"true\"></i></small>\n            </div>\n\n            <!-- IF OTHER -->\n            <div class=\"form-group\" v-if=\"userUpdate.pos == 'other'\">\n              <label for=\"other\"><i class=\"fa fa-tag\" aria-hidden=\"true\"></i> Specify Position</label>\n              <input v-model=\"posOther\" type=\"tel\" id=\"other\" class=\"form-control\" aria-describedby=\"helpName\" spellcheck>\n              <small id=\"helpName\" class=\"text-muted\">This is if you chose \"other\" as your position</small>\n            </div>\n\n          </div>\n\n\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\" @click=\"updatePos\">Save</button>\n          </div>\n\n        </div>\n      </div>\n    </div>\n    <!-- /EDIT POSITION -->\n\n\n\n  </div>\n\n\n  <!-- AD DELETE -->\n    <div class=\"modal fade\" id=\"remAcc\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modelTitleId\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content bg-dark border-0 text-white\">\n          <div class=\"modal-header border-0\">\n            <h5 class=\"modal-title text-orange\"><i class=\"fa fa-trash\"></i> Account</h5>\n              <button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n          </div>\n          <div class=\"modal-body\">\n            \n            <p>Are you sure you want to remove your account? All your ads will be removed and this action is irreversible</p>\n\n\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">No</button>\n            <button type=\"button\" data-dismiss=\"modal\" class=\"btn btn-primary\" @click=\"removeSelf\">Yes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n</div>\n  \n</template>\n\n<script>\nimport {mapGetters, mapActions} from 'vuex'\n\n// exportation\nexport default {\n\n  name: \"profile\",\n\n  data() {\n    return {\n\n      user: {\n        name: null,\n        campus: null,\n        pos: null,\n        cellNo: null,\n        whatsAppNo: null,\n        email: null,\n        studentNo: null,\n        _id: null\n      },\n\n      oldPwd: \"\",\n\n      userUpdate: {\n        name: \"null\",\n        campus: null,\n        pos: null,\n        cellNo: null,\n        whatsAppNo: null,\n        email: null,\n        studentNo: null\n      },\n\n      newPwd: \"\",\n      posOther: \"\"\n\n    }\n\n  },\n\n  methods: {\n\n    ...mapActions(['getCampuses', \"DeAuth\"]),\n\n    getUser(){\n      this.$axios.get('/user/profile', {\n          headers: {\n            Authorization: \"Bearer \" + this.authInfo.token\n          }\n        })\n        .then(res => {\n\n          this.user = res.data.profile\n\n        })\n        .catch(err => {\n          this.$toasted.error(err, {icon: \"times-circle\"})\n        })\n    },\n\n    changePwd() {\n\n\n      if(this.newPwd.length < 4 || this.oldPwd.length < 4) {\n        this.$toasted.error(\"password must atleast be 4 charecters long\", {icon: \"times-circle\"})\n      } else {\n\n        let loader = this.$loading.show()\n\n        this.$axios.post('/user/passwordchange', {oldPwd: this.oldPwd, newPwd: this.newPwd},{\n          headers: {\n            Authorization: \"Bearer \" + this.authInfo.token\n          }\n        }).then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})\n            this.oldPwd = \"\"\n            this.newPwd = \"\"\n          }\n\n          loader.hide()\n\n        })\n        .catch(err => {\n          this.$toasted.error(err, {icon: \"times-circle\"})\n          loader.hide()\n        })\n\n      }\n    },\n\n    setUpdateVals(values) {\n      this.userUpdate.name = values.name\n      this.userUpdate.campus = values.campus\n      this.userUpdate.cellNo = values.cellNo\n      this.userUpdate.email = values.email\n      this.userUpdate.whatsAppNo = values.whatsAppNo\n      this.userUpdate.pos = values.pos\n    },\n\n    updateProfile() {\n\n      let loader = this.$loading.show()\n\n      this.$axios.post('/user/profileupdate', {values: this.userUpdate, update: \"profile\"}, axiosOpts).then(res => {\n        \n        if(res.data.error) {\n          this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n        } else {\n          this.$toasted.success(res.data.message, {icon: \"check\"})\n          this.getUser()\n        }\n\n        loader.hide()\n\n      }).catch(err => {\n        this.$toasted.error(err, {icon: \"times-circle\"})\n        loader.hide()\n      })\n    },\n\n    updatePos() {\n      // carefully set postion\n      let position = this.userUpdate.pos\n      let positionOther = this.posOther\n\n      function getPos() {\n\n\n        if(position == 'other') {\n          return positionOther\n        } else {\n          return position\n        }\n      }\n\n      let loader = this.$loading.show()\n\n      this.$axios.post('/user/profileupdate', {values: {pos: getPos()}, update: \"position\"}, axiosOpts)\n        .then(res => {\n\n          if(res.data.error) {\n          this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})\n            this.getUser()\n          }\n\n          loader.hide()\n\n        })\n        .catch(err => {\n\n          this.$toasted.error(err, {icon: \"times-circle\"})\n\n          loader.hide()\n\n        })\n\n    },\n\n    removeSelf() {\n\n      let loader = this.$loading.show()\n\n      this.$axios.delete('/user/rem/'+this.user._id, {\n          headers: {\n            Authorization: \"Bearer \" + this.authInfo.token\n          }\n        })\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})\n            this.DeAuth()\n            this.$router.replace(\"/\")\n          }\n\n          loader.hide()\n\n        }).catch(err => {\n          loader.hide()\n          this.$toasted.error(err, {icon: \"times-circle\"})\n        })\n\n    }\n\n  },\n  // end of methods\n\n  async created() {\n\n    let loader = this.$loading.show()\n\n    await this.getUser()\n    await this.getCampuses()\n\n    loader.hide()\n\n  },\n\n  async beforeMount() { \n    await this.getCampuses()\n    await this.getUser()\n    return false\n  },\n\n  computed: mapGetters(['campuses', 'authInfo'])\n\n\n}\n</script>\n\n<style scoped>\n\n  table tr {\n    border: 0px solid #000;\n  }\n\n  .card, .card-body table tr {\n    border-radius: 0px !important;\n    text-shadow: #000 0px 0px 0px;\n    color: #fff;\n  }\n\n  .grad {\n    text-shadow: #000 0px 0px 0px;\n  }\n\n  .grad-4 {\n    border-right: 10px solid #FF4500;\n    text-shadow: rgb(255, 255, 255) 0px 0px 0px;\n  }\n \n\n\n\n</style>\n"]}]}