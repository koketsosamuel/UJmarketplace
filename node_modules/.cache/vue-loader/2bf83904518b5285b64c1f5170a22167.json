{"remainingRequest":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\UJmart\\src\\components\\auth\\login.vue?vue&type=style&index=0&id=178ddd5c&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\UJmart\\src\\components\\auth\\login.vue","mtime":1586437515353},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\UJmart\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.form {\n  margin-bottom: 60px;\n}\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA","file":"login.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\n  \n  <div>\n\n  <div class=\"container purple p-2 mt-2 mb-2\">\n\n    <h5 class=\"white-text\">\n      <i class=\"fa fa-user d-inline\"></i> Login\n    </h5>\n\n    <!-- STUDENT NO -->\n    <div class=\"form-group\">\n      <label for=\"sNo\"><i class=\"fa fa-graduation-cap\" aria-hidden=\"true\"></i> Student No. | <i class=\"fa fa-id-card\"></i> number on your UJ card</label>\n      <input v-model=\"sNo\" type=\"text\" id=\"sNo\" class=\"form-control\" placeholder=\"e.g 212002355\" aria-describedby=\"helpName\">\n    </div>\n\n\n    <div class=\"form-group\">\n      <label for=\"pwd\"><i class=\"fa fa-lock\" aria-hidden=\"true\"></i> Password</label>\n      <input v-model=\"pwd\" type=\"password\" id=\"pwd\" class=\"form-control\">\n    </div>\n\n    <button class=\"btn orange btn-lg\" @click=\"login\">Login</button>\n\n    <div class=\"alert mt-2 border-primary\" role=\"alert\">\n      <router-link to=\"/register\"><a href=\"#\" class=\"btn btn-info btn-sm text-white\">Register</a></router-link> | <a class=\"modal-trigger\" href=\"#pwdReset\">Forgot password?</a>\n    </div>\n\n  </div>\n\n\n  <!-- MODAL -->\n  <div class=\"modal orange darken-4\" id=\"pwdReset\">\n \n      <div class=\"modal-content\">\n        <!-- STUDENT NO -->\n        <div class=\"form-group\">\n          <label for=\"sNoMod\"><i class=\"fa fa-graduation-cap\" aria-hidden=\"true\"></i> Student No. | <i class=\"fa fa-id-card\"></i> number on your UJ card</label>\n          <input v-model=\"sNoReset\" type=\"text\" id=\"sNoMod\" class=\"form-control\" placeholder=\"e.g 212002355\" aria-describedby=\"helpName\">\n\n          <div class=\"text-dark font-italic text-muted\">\n            <p>You will receive an email with a link, and the link will expire in 10 minutes</p>\n          </div>\n\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn modal-close orange darken-4\" data-dismiss=\"modal\" @click=\"resetLink\">Submit</button>\n        <button type=\"button\" class=\"btn modal-close white black-text\" data-dismiss=\"modal\">Cancel</button>\n      </div>\n    </div>\n  </div>\n\n\n</template>\n\n<script>\n\n// import modules\nimport {mapActions} from 'vuex'\nimport jsCookie from 'js-cookie'\n\nexport default {\n\n  name: \"login\",\n  data(){\n\n    return {\n      sNo: '',\n      pwd: '',\n      sNoReset: ''\n    }\n\n  },\n\n\n  methods: {\n\n    ...mapActions(['authenticate']),\n\n    // login method\n    login(){\n\n      this.$axios.post('/user/login', {studentNo: this.sNo, password: this.pwd})\n        .then(res => {\n\n          // if error \n          if(res.data.error) {\n            this.$toasted.error(res.data.message,{icon: \"times-circle\"})\n          }  else {\n\n            // cookie setting\n            jsCookie.set('4u7h3n71c4710n', {token: res.data.token, authData: res.data.authData}, {expires: 9000})\n\n            // auth \n            this.authenticate(res.data.authData)\n\n            this.$toasted.success(\"Logged In\", {icon: \"check-circle\"})\n\n            // redirection\n            this.$router.push('/')\n\n\n          }\n          \n\n        }).catch(err => {\n          // toast\n          // console.log(err)\n          this.$toasted.error(err,{icon: \"times-circle\"})\n        })\n\n        \n\n    },\n\n    resetLink() {\n\n      if(this.sNoReset.length > 0) {\n\n        let loader = this.$loading.show()\n\n        this.$axios.post(\"/user/resetlink\", {sNo: this.sNoReset})\n        .then(res => {\n\n          loader.hide()\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon:\"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon:\"check\"})\n          }\n\n        }).catch(err => {\n          loader.hide()          \n          this.$toasted.error(err, {icon:\"times-circle\"})\n        })\n      } else {\n        this.$toasted.error(\"Enter Student number / number on your UJ access card\", {icon:\"times-circle\"})\n      }\n\n    }\n\n  }\n\n}\n</script>\n\n<style scoped>\n  .form {\n    margin-bottom: 60px;\n  }\n</style>\n"]}]}