{"remainingRequest":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\src\\components\\admin\\searchUsers.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\src\\components\\admin\\searchUsers.vue","mtime":1566765111000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Downloads\\UJmart-master\\UJmart\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapGetters} from 'vuex'\n\n// \n\nexport default {\n\n  name: \"searchusers\",\n\n  data() {\n    return {\n      users: [],\n      page: 1,\n      pages: 1,\n      class: \"\",\n      userD: {\n        _id: null,\n        pos: null,\n        campus: null, \n        sNo: null,\n        email: null,\n        whatsAppNo: null,\n        cellNo: null\n      }\n    }\n  },\n\n  methods: {\n\n    async getSearchRes() {\n\n      let loader = this.$loading.show()\n\n      let res = await this.$axios.get(`/user/find/${this.$route.params.search}/${this.$route.params.page}`, {\n        headers: {\n          Authorization: \"Bearer \" + this.authInfo.token\n        }\n      })\n      \n      this.pages = res.data.pages\n      this.page = res.data.page\n      this.users = res.data.users\n\n      loader.hide()\n\n    },\n\n    setEditData(user) {\n\n      this.userD._id = user._id\n      this.userD.name = user.name\n      this.userD.email = user.email\n      this.userD.sNo = user.studentNo\n      this.userD.campus = user.campus\n      this.userD.pos = user.pos\n\n      if(user.whatsAppNo == null) {\n        this.userD.whatsAppNo = \"Unavailable\"\n      } else {\n        this.userD.whatsAppNo = user.whatsAppNo\n      }\n\n      if(user.cellNo == null) {\n        this.userD.cellNo = \"Unavailable\"\n      } else {\n        this.userD.cellNo = user.cellNo\n      }\n\n    },\n\n    async clickEr(p) {\n\n      this.$router.push('/search/ad/'+this.$route.params.search+\"/\"+p)      \n\n    },\n\n    remove(i) {\n\n      let loader = this.$loading.show()\n\n      this.$axios.delete(`/user/rem/${this.userD._id}`, {\n        headers: {\n          Authorization: \"Bearer \" + this.authInfo.token\n        }\n      })\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})         \n            this.users.splice(i, 1)\n          }\n\n          loader.hide()\n\n        })\n          .catch(err => {\n            this.$toasted.error(err, {icon: \"times-circle\"})\n            loader.hide()\n          })\n    }\n\n  },\n\n  computed: mapGetters(['authInfo']),\n\n  watch: {\n    async $route() {\n      let loader = this.$loading.show()\n      await this.getSearchRes()\n      loader.hide()\n    }\n  },\n\n  async created() {\n\n    let loader = this.$loading.show()\n    await this.getSearchRes()\n    loader.hide()\n\n  }\n\n}\n",{"version":3,"sources":["searchUsers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA","file":"searchUsers.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  \n  <div>\n\n    <navigation />\n\n    <div class=\"container\">\n      <h3><i class=\"fa fa-search\"></i> {{$route.params.search}} </h3>\n\n      <div class=\"list-group mt-3\">\n        <a href=\"javascript:void(0)\" v-for=\"user in users\" :key=\"user._id\" class=\"list-group-item list-group-item-action list-group-item-primary\" @click=\"setEditData(user)\" >\n          <div> \n\n            <i class=\"fa fa-user\"></i> &nbsp;{{user.name}} \n            <span class=\"float-right\">\n              <div class=\"btn-group\">\n                <button class=\"py-1 btn btn-success\" data-toggle=\"modal\" data-target=\"#userInf\"><i class=\"fa fa-info-circle\"></i></button>\n                <button class=\"btn py-1 btn-danger\" data-toggle=\"modal\" data-target=\"#remUser\"><i class=\"fa fa-trash\"></i></button>\n              </div>\n            </span>\n            <div class=\"clearfix\"></div>\n\n          </div>\n        </a>\n      </div>\n\n      <div v-if=\"users.length == 0\">\n        <h1 class=\"display-1 text-center\">\n          <i class=\"fa fa-user-times\" aria-hidden=\"true\"></i>\n        </h1>\n        <h4 class=\"text-center\">No Users Found</h4>\n      </div>\n\n      <paginate\n        v-if=\"pages > 1\"\n        :page-count=\"pages\"\n        :click-handler=\"clickEr\"\n        container-class=\"pagination mt-4\"\n        page-class=\"page-item\"\n        page-link-class=\"page-link text-white bg-primary\"\n        prev-class=\"page-item\"\n        prev-link-class=\"page-link bg-dark text-white\"\n        next-class=\"page-item\"\n        next-link-class=\"page-link bg-dark text-white\"\n        active-class=\"active disabled font-weight-bold\"\n      />\n\n    </div>\n\n    <!-- USER INFO -->\n    <div class=\"modal fade\" id=\"userInf\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modelTitleId\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content bg-dark border-0 text-white\">\n          <div class=\"modal-header border-0\">\n            <h5 class=\"modal-title text-orange\"><i class=\"fa fa-user\"></i> {{ userD.name }} <small class=\"text-white badge badge-primary\">{{ userD.pos }}</small></h5>\n              <button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n          </div>\n          <div class=\"modal-body text-white\">\n            \n            <p><i class=\"fab fa-whatsapp\"></i> {{ userD.whatsAppNo }}</p>\n            <p><i class=\"fa fa-phone\"></i> {{ userD.cellNo }}</p>\n            <p><i class=\"fa fa-envelope\"></i> {{ userD.email }} </p>\n            <p><i class=\"fa fa-university\"></i> {{ userD.campus }}</p>\n\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">CLOSE</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n    <!-- USER DELETE -->\n    <div class=\"modal fade\" id=\"remUser\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"modelTitleId\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content bg-dark border-0 text-white\">\n          <div class=\"modal-header border-0\">\n            <h5 class=\"modal-title text-orange\"><i class=\"fa fa-user-times\"></i> User</h5>\n              <button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n          </div>\n          <div class=\"modal-body\">\n            \n            <p>Are you sure you want to remove <q class=\"font-weight-bold text-primary\">{{userD.name}}</q>?</p>\n\n\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">No</button>\n            <button type=\"button\" data-dismiss=\"modal\" class=\"btn btn-primary\" @click=\"remove\">Yes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n  </div>\n\n</template>\n\n<script>\nimport {mapGetters} from 'vuex'\n\n// \n\nexport default {\n\n  name: \"searchusers\",\n\n  data() {\n    return {\n      users: [],\n      page: 1,\n      pages: 1,\n      class: \"\",\n      userD: {\n        _id: null,\n        pos: null,\n        campus: null, \n        sNo: null,\n        email: null,\n        whatsAppNo: null,\n        cellNo: null\n      }\n    }\n  },\n\n  methods: {\n\n    async getSearchRes() {\n\n      let loader = this.$loading.show()\n\n      let res = await this.$axios.get(`/user/find/${this.$route.params.search}/${this.$route.params.page}`, {\n        headers: {\n          Authorization: \"Bearer \" + this.authInfo.token\n        }\n      })\n      \n      this.pages = res.data.pages\n      this.page = res.data.page\n      this.users = res.data.users\n\n      loader.hide()\n\n    },\n\n    setEditData(user) {\n\n      this.userD._id = user._id\n      this.userD.name = user.name\n      this.userD.email = user.email\n      this.userD.sNo = user.studentNo\n      this.userD.campus = user.campus\n      this.userD.pos = user.pos\n\n      if(user.whatsAppNo == null) {\n        this.userD.whatsAppNo = \"Unavailable\"\n      } else {\n        this.userD.whatsAppNo = user.whatsAppNo\n      }\n\n      if(user.cellNo == null) {\n        this.userD.cellNo = \"Unavailable\"\n      } else {\n        this.userD.cellNo = user.cellNo\n      }\n\n    },\n\n    async clickEr(p) {\n\n      this.$router.push('/search/ad/'+this.$route.params.search+\"/\"+p)      \n\n    },\n\n    remove(i) {\n\n      let loader = this.$loading.show()\n\n      this.$axios.delete(`/user/rem/${this.userD._id}`, {\n        headers: {\n          Authorization: \"Bearer \" + this.authInfo.token\n        }\n      })\n        .then(res => {\n\n          if(res.data.error) {\n            this.$toasted.error(res.data.message, {icon: \"times-circle\"})\n          } else {\n            this.$toasted.success(res.data.message, {icon: \"check\"})         \n            this.users.splice(i, 1)\n          }\n\n          loader.hide()\n\n        })\n          .catch(err => {\n            this.$toasted.error(err, {icon: \"times-circle\"})\n            loader.hide()\n          })\n    }\n\n  },\n\n  computed: mapGetters(['authInfo']),\n\n  watch: {\n    async $route() {\n      let loader = this.$loading.show()\n      await this.getSearchRes()\n      loader.hide()\n    }\n  },\n\n  async created() {\n\n    let loader = this.$loading.show()\n    await this.getSearchRes()\n    loader.hide()\n\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}